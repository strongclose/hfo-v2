---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { Navigation } from '../../components/Navigation';
import { FooterExpanded } from '../../components/homepage/FooterExpanded';

export async function getStaticPaths() {
  // Sample payer data for static path generation
  const payers = [
    "Anthem Blue Cross Blue Shield",
    "Aetna Health Plans", 
    "Kaiser Permanente",
    "UnitedHealthcare",
    "Humana Health Plans",
    "Cigna Healthcare",
    "Molina Healthcare",
    "Florida Blue"
  ];

  return payers.map(name => ({
    params: {
      slug: name
        .toLowerCase()
        .replace(/[^a-z0-9\s-]/g, '')
        .replace(/\s+/g, '-')
        .replace(/-+/g, '-')
        .trim()
    }
  }));
}

const { slug } = Astro.params;

// Sample payer data - in a real app, this would come from a database/API
const samplePayers = [
  {
    id: "anthem-blue-cross-blue-shield",
    name: "Anthem Blue Cross Blue Shield",
    type: "Health Insurance",
    ein: "54-1234567",
    hiosId: "53882",
    memberCount: 4200000,
    coverageStates: ["CA", "NY", "TX", "FL", "OH", "IN", "KY", "MO", "NV", "WI"],
    marketType: "Mixed",
    state: "IN",
    city: "Indianapolis",
    zipCode: "46204",
    phone: "(800) 331-1476",
    website: "https://anthem.com",
    transparencyScore: 85,
    updated: "January 2025",
    description: "One of the largest health benefits companies in the US, serving millions of members across multiple states with comprehensive health insurance coverage.",
    planTypes: ["HMO", "PPO", "EPO", "Medicare Advantage", "Medicaid"],
    networkSize: "Large",
    specialPrograms: ["Medicare Advantage", "Medicaid", "ACA Marketplace", "Employer Groups"],
    address: {
      street: "120 Monument Circle",
      city: "Indianapolis",
      state: "IN",
      zip: "46204"
    },
    ceoName: "Gail K. Boudreaux",
    foundedYear: 1940,
    employees: 73800,
    annualRevenue: "146.8B"
  },
  {
    id: "aetna-health-plans",
    name: "Aetna Health Plans",
    type: "Health Insurance",
    ein: "06-1234568",
    hiosId: "47037",
    memberCount: 2800000,
    coverageStates: ["CT", "FL", "GA", "IL", "KY", "LA", "MD", "NJ", "NY", "OH", "PA", "TX", "VA"],
    marketType: "Mixed",
    state: "CT",
    city: "Hartford",
    zipCode: "06156",
    phone: "(800) 872-3862",
    website: "https://aetna.com",
    transparencyScore: 78,
    updated: "January 2025",
    description: "A CVS Health company providing innovative health insurance products and services to millions of members nationwide.",
    planTypes: ["HMO", "PPO", "Medicare Advantage", "Employer Plans"],
    networkSize: "Large",
    specialPrograms: ["Medicare Advantage", "ACA Marketplace", "Employer Groups", "International"],
    address: {
      street: "151 Farmington Avenue",
      city: "Hartford",
      state: "CT",
      zip: "06156"
    },
    ceoName: "Dan Finke",
    foundedYear: 1853,
    employees: 49500,
    annualRevenue: "84.3B"
  },
  {
    id: "kaiser-permanente",
    name: "Kaiser Permanente",
    type: "HMO",
    ein: "94-1234569",
    hiosId: "92895",
    memberCount: 12400000,
    coverageStates: ["CA", "CO", "GA", "HI", "MD", "OR", "VA", "WA"],
    marketType: "Mixed",
    state: "CA",
    city: "Oakland",
    zipCode: "94612",
    phone: "(510) 271-5910",
    website: "https://kp.org",
    transparencyScore: 92,
    updated: "January 2025",
    description: "An integrated managed care consortium that combines health insurance and healthcare delivery through owned hospitals and medical groups.",
    planTypes: ["HMO", "Medicare Advantage", "Medicaid"],
    networkSize: "Medium",
    specialPrograms: ["Medicare Advantage", "Medicaid", "ACA Marketplace", "Integrated Care"],
    address: {
      street: "1 Kaiser Plaza",
      city: "Oakland",
      state: "CA",
      zip: "94612"
    },
    ceoName: "Greg A. Adams",
    foundedYear: 1945,
    employees: 218000,
    annualRevenue: "95.4B"
  },
  {
    id: "unitedhealth-group",
    name: "UnitedHealthcare",
    type: "Health Insurance",
    ein: "41-1234570",
    hiosId: "51146",
    memberCount: 56000000,
    coverageStates: ["All 50 States"],
    marketType: "Mixed",
    state: "MN",
    city: "Minnetonka",
    zipCode: "55343",
    phone: "(800) 328-5979",
    website: "https://uhc.com",
    transparencyScore: 74,
    updated: "January 2025",
    description: "The largest health insurance company in the United States, providing comprehensive healthcare coverage and services nationwide.",
    planTypes: ["HMO", "PPO", "EPO", "Medicare Advantage", "Medicaid", "Employer Plans"],
    networkSize: "Large",
    specialPrograms: ["Medicare Advantage", "Medicaid", "ACA Marketplace", "Employer Groups", "International"],
    address: {
      street: "9900 Bren Road East",
      city: "Minnetonka",
      state: "MN",
      zip: "55343"
    },
    ceoName: "Andrew Witty",
    foundedYear: 1977,
    employees: 440000,
    annualRevenue: "372.9B"
  },
  {
    id: "humana-health-plans",
    name: "Humana Health Plans",
    type: "Health Insurance",
    ein: "61-1234571",
    hiosId: "18076",
    memberCount: 18000000,
    coverageStates: ["AL", "AZ", "FL", "GA", "IL", "IN", "KY", "LA", "MO", "NC", "OH", "SC", "TN", "TX", "WI"],
    marketType: "Mixed",
    state: "KY",
    city: "Louisville",
    zipCode: "40202",
    phone: "(800) 448-6262",
    website: "https://humana.com",
    transparencyScore: 81,
    updated: "January 2025",
    description: "A leading health and well-being company with a strong focus on Medicare Advantage plans and integrated healthcare services.",
    planTypes: ["Medicare Advantage", "Medicaid", "Employer Plans", "Individual Plans"],
    networkSize: "Large",
    specialPrograms: ["Medicare Advantage", "Medicaid", "Wellness Programs", "Chronic Care Management"],
    address: {
      street: "500 West Main Street",
      city: "Louisville",
      state: "KY",
      zip: "40202"
    },
    ceoName: "Bruce D. Broussard",
    foundedYear: 1961,
    employees: 67100,
    annualRevenue: "106.0B"
  },
  {
    id: "cigna-healthcare",
    name: "Cigna Healthcare",
    type: "Health Insurance",
    ein: "06-1234572",
    hiosId: "86893",
    memberCount: 19500000,
    coverageStates: ["AZ", "CO", "FL", "GA", "IL", "KS", "MO", "NC", "TN", "TX", "UT", "VA"],
    marketType: "Mixed",
    state: "CT",
    city: "Bloomfield",
    zipCode: "06002",
    phone: "(800) 997-1654",
    website: "https://cigna.com",
    transparencyScore: 76,
    updated: "January 2025",
    description: "A global health services company dedicated to improving the health, well-being and peace of mind of those we serve.",
    planTypes: ["HMO", "PPO", "EPO", "Medicare Advantage", "Employer Plans"],
    networkSize: "Large",
    specialPrograms: ["Medicare Advantage", "ACA Marketplace", "Employer Groups", "International", "Behavioral Health"],
    address: {
      street: "900 Cottage Grove Road",
      city: "Bloomfield",
      state: "CT",
      zip: "06002"
    },
    ceoName: "David M. Cordani",
    foundedYear: 1982,
    employees: 73700,
    annualRevenue: "195.3B"
  },
  {
    id: "molina-healthcare",
    name: "Molina Healthcare",
    type: "Medicaid",
    ein: "33-1234573",
    hiosId: "25076",
    memberCount: 5200000,
    coverageStates: ["CA", "FL", "ID", "IL", "MI", "MS", "NM", "NY", "OH", "SC", "TX", "UT", "WA", "WI"],
    marketType: "Government",
    state: "CA",
    city: "Long Beach",
    zipCode: "90802",
    phone: "(800) 526-8196",
    website: "https://molinahealthcare.com",
    transparencyScore: 87,
    updated: "January 2025",
    description: "A multi-state healthcare organization that provides managed healthcare services under Medicaid and Medicare programs.",
    planTypes: ["Medicaid", "Medicare Advantage", "ACA Marketplace"],
    networkSize: "Medium",
    specialPrograms: ["Medicaid", "Medicare Advantage", "ACA Marketplace", "Dual Eligible Special Needs"],
    address: {
      street: "200 Oceangate Suite 100",
      city: "Long Beach",
      state: "CA",
      zip: "90802"
    },
    ceoName: "Joseph M. Zubretsky",
    foundedYear: 1980,
    employees: 13500,
    annualRevenue: "31.2B"
  },
  {
    id: "florida-blue",
    name: "Florida Blue",
    type: "Blue Cross Blue Shield",
    ein: "59-1234574",
    hiosId: "11512",
    memberCount: 8900000,
    coverageStates: ["FL"],
    marketType: "Mixed",
    state: "FL",
    city: "Jacksonville",
    zipCode: "32202",
    phone: "(800) 352-2583",
    website: "https://floridablue.com",
    transparencyScore: 83,
    updated: "January 2025",
    description: "Florida's Blue Cross and Blue Shield plan, providing comprehensive health insurance coverage throughout the state of Florida.",
    planTypes: ["HMO", "PPO", "EPO", "Medicare Advantage", "ACA Marketplace"],
    networkSize: "Large",
    specialPrograms: ["Medicare Advantage", "ACA Marketplace", "Employer Groups", "Individual Plans"],
    address: {
      street: "4800 Deerwood Campus Parkway",
      city: "Jacksonville",
      state: "FL",
      zip: "32246"
    },
    ceoName: "Pat Geraghty",
    foundedYear: 1946,
    employees: 10800,
    annualRevenue: "18.4B"
  }
];

// Convert slug back to find matching payer
const findPayerBySlug = (slug: string) => {
  return samplePayers.find(payer => {
    const payerSlug = payer.name
      .toLowerCase()
      .replace(/[^a-z0-9\s-]/g, '')
      .replace(/\s+/g, '-')
      .replace(/-+/g, '-')
      .trim();
    return payerSlug === slug;
  });
};

const payer = findPayerBySlug(slug);

// If payer not found, return 404
if (!payer) {
  return Astro.redirect('/404');
}

// Grade calculation function
const getGradeFromScore = (score: number): string => {
  if (score >= 90) return 'A+';
  if (score >= 85) return 'A';
  if (score >= 75) return 'B';
  if (score >= 65) return 'C';
  return 'D';
};

const getGradeColor = (grade: string) => {
  switch (grade) {
    case 'A+':
    case 'A':
      return 'bg-emerald-500 text-white ring-emerald-200';
    case 'B':
      return 'bg-blue-500 text-white ring-blue-200';
    case 'C':
      return 'bg-amber-500 text-white ring-amber-200';
    case 'D':
    default:
      return 'bg-red-500 text-white ring-red-200';
  }
};

const grade = getGradeFromScore(payer.transparencyScore);

// Sample plan pricing data
const planPricing = [
  {
    planName: "Blue Cross PPO Standard",
    category: "Individual",
    monthlyPremium: 485,
    deductible: 2500,
    outOfPocketMax: 8550,
    networkType: "PPO",
    popularityRank: 1
  },
  {
    planName: "Health Plus HMO",
    category: "Individual", 
    monthlyPremium: 325,
    deductible: 1500,
    outOfPocketMax: 6000,
    networkType: "HMO",
    popularityRank: 2
  },
  {
    planName: "Premier EPO",
    category: "Individual",
    monthlyPremium: 650,
    deductible: 1000,
    outOfPocketMax: 7500,
    networkType: "EPO",
    popularityRank: 3
  },
  {
    planName: "Medicare Advantage Plus",
    category: "Medicare",
    monthlyPremium: 89,
    deductible: 0,
    outOfPocketMax: 3400,
    networkType: "HMO",
    popularityRank: 1
  },
  {
    planName: "Group Health Standard",
    category: "Employer",
    monthlyPremium: 420,
    deductible: 2000,
    outOfPocketMax: 7000,
    networkType: "PPO",
    popularityRank: 1
  }
];
---

<BaseLayout 
  title={`${payer.name} - Payer Profile | HealthFees.org`}
  description={payer.description}
>
  <div class="min-h-screen bg-gray-50">
    <!-- Global Navigation -->
    <Navigation client:load />

    <!-- Payer Hero Section -->
    <section class="bg-gradient-to-br from-blue-50 via-white to-indigo-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
        
        <!-- Payer Header -->
        <div class="text-center mb-16">
          <div class="flex items-center justify-center mb-8">
            <div class="w-24 h-24 bg-gradient-to-br from-blue-100 to-blue-200 rounded-3xl flex items-center justify-center shadow-lg">
              <svg class="w-12 h-12 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
              </svg>
            </div>
          </div>
          
          <h1 class="text-5xl md:text-6xl font-bold text-gray-900 mb-6 tracking-tight">
            {payer.name}
          </h1>
          
          <div class="flex items-center justify-center gap-4 mb-8">
            <span class="inline-flex items-center px-4 py-2 rounded-full text-base font-medium bg-blue-100 text-blue-800 border border-blue-200">
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
              </svg>
              {payer.city}, {payer.state}
            </span>
            <span class="inline-flex items-center px-4 py-2 rounded-full text-base font-medium bg-purple-100 text-purple-800 border border-purple-200">
              {payer.type}
            </span>
            <!-- Transparency Score Badge -->
            <div class="group relative">
              <div class={`inline-flex items-center px-6 py-3 rounded-full font-bold text-xl ring-4 ${getGradeColor(grade)} shadow-lg cursor-help`}>
                Grade: {grade}
              </div>
              <div class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-80 p-4 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-10">
                This is HealthFees.org's transparency score based on how well this payer meets federal price transparency requirements.
              </div>
            </div>
          </div>

          <p class="text-xl text-gray-700 max-w-4xl mx-auto leading-relaxed mb-6">
            {payer.description}
          </p>

          <!-- Credibility Banner -->
          <div class="mb-8">
            <p class="text-base text-gray-500 max-w-4xl mx-auto leading-relaxed">
              Pricing data sourced from federally required payer and insurer disclosures. Verified and structured by HealthFees.org.
            </p>
          </div>

          <!-- Action Buttons -->
          <div class="flex flex-wrap justify-center gap-4 mb-16">
            <a 
              href={payer.website}
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex items-center px-8 py-4 border border-transparent text-lg font-semibold rounded-xl text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 shadow-lg hover:shadow-xl"
            >
              <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
              </svg>
              Visit Website
            </a>
            <a 
              href={`tel:${payer.phone}`}
              class="inline-flex items-center px-8 py-4 border border-gray-300 text-lg font-semibold rounded-xl text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 shadow-lg hover:shadow-xl"
            >
              <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
              </svg>
              {payer.phone}
            </a>
            <a 
              href="/compare-prices"
              class="inline-flex items-center px-8 py-4 border border-teal-300 text-lg font-semibold rounded-xl text-teal-700 bg-teal-50 hover:bg-teal-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-all duration-200 shadow-lg hover:shadow-xl"
            >
              <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
              </svg>
              Compare Plans Across Payers
            </a>
            <a 
              href="/search-procedure"
              class="inline-flex items-center px-8 py-4 border border-blue-300 text-lg font-semibold rounded-xl text-blue-700 bg-blue-50 hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 shadow-lg hover:shadow-xl"
            >
              <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
              </svg>
              Search Plan Prices with This Payer
            </a>
          </div>

          <!-- Clean Metric Pills -->
          <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
            <div class="bg-white p-8 rounded-3xl border border-blue-200 shadow-lg">
              <div class="text-4xl font-bold text-blue-600 mb-3">{(payer.memberCount / 1000000).toFixed(1)}M</div>
              <div class="text-base text-blue-700 font-semibold">Members</div>
            </div>
            <div class="bg-white p-8 rounded-3xl border border-teal-200 shadow-lg">
              <div class="text-4xl font-bold text-teal-600 mb-3">{payer.coverageStates.length === 1 && payer.coverageStates[0] === "All 50 States" ? 50 : payer.coverageStates.length}</div>
              <div class="text-base text-teal-700 font-semibold">Coverage States</div>
            </div>
            <div class="bg-white p-8 rounded-3xl border border-purple-200 shadow-lg">
              <div class="text-4xl font-bold text-purple-600 mb-3">{payer.planTypes.length}</div>
              <div class="text-base text-purple-700 font-semibold">Plan Types</div>
            </div>
            <div class="bg-white p-8 rounded-3xl border border-emerald-200 shadow-lg relative">
              <div class="text-4xl font-bold text-emerald-600 mb-3">{grade}</div>
              <div class="text-base text-emerald-700 font-semibold">Transparency Score</div>
              <!-- Tooltip -->
              <div class="absolute top-2 right-2">
                <div class="group relative">
                  <svg class="w-5 h-5 text-gray-400 cursor-help" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                  </svg>
                  <div class="absolute bottom-full right-0 mb-2 w-80 p-4 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-10">
                    This score reflects how well this payer meets federal price transparency rules based on data format, structure, and recency. Files are reviewed monthly by HealthFees.org.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Transparency Compliance Score Block -->
    <section class="py-16 bg-gray-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="bg-white rounded-3xl p-10 shadow-lg border border-gray-200">
          <h2 class="text-3xl font-bold text-gray-900 mb-8 text-center">Transparency Compliance Score</h2>
          
          <div class="grid lg:grid-cols-4 gap-8 items-center">
            <!-- Main Score -->
            <div class="lg:col-span-1 text-center">
              <div class={`inline-flex items-center px-8 py-6 rounded-2xl font-bold text-4xl ring-4 ${getGradeColor(grade)} shadow-lg mb-4`}>
                {grade}
              </div>
              <p class="text-lg font-semibold text-gray-700">Overall Grade</p>
            </div>
            
            <!-- Subscores -->
            <div class="lg:col-span-3 grid md:grid-cols-3 gap-6">
              <div class="bg-blue-50 p-6 rounded-2xl border border-blue-200">
                <h3 class="text-lg font-semibold text-blue-900 mb-2">File Structure Quality</h3>
                <div class="text-3xl font-bold text-blue-600 mb-2">{Math.round(payer.transparencyScore * 0.95)}%</div>
                <p class="text-sm text-blue-700">Data format compliance and completeness</p>
              </div>
              
              <div class="bg-teal-50 p-6 rounded-2xl border border-teal-200">
                <h3 class="text-lg font-semibold text-teal-900 mb-2">Data Coverage</h3>
                <div class="text-3xl font-bold text-teal-600 mb-2">{Math.round(payer.transparencyScore * 0.92)}%</div>
                <p class="text-sm text-teal-700">Breadth of pricing information available</p>
              </div>
              
              <div class="bg-purple-50 p-6 rounded-2xl border border-purple-200">
                <h3 class="text-lg font-semibold text-purple-900 mb-2">Last Detected Update</h3>
                <div class="text-3xl font-bold text-purple-600 mb-2">{payer.updated}</div>
                <p class="text-sm text-purple-700">Most recent data refresh detected</p>
              </div>
            </div>
          </div>
          
          <div class="mt-8 p-6 bg-gray-50 rounded-xl">
            <p class="text-gray-700 leading-relaxed">
              This score reflects how well this payer meets federal price transparency rules based on data format, structure, and recency. 
              HealthFees.org reviews transparency files monthly and scores payers on compliance with CMS requirements for machine-readable pricing data.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Plan Pricing Analysis -->
    <section class="py-20 bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
          <h2 class="text-4xl font-bold text-gray-900 mb-6">Plan Pricing Intelligence</h2>
          <p class="text-xl text-gray-600 max-w-4xl mx-auto">
            Comprehensive analysis of {payer.name}'s plan pricing, member costs, and market competitiveness derived from HealthFees.org's structured data intelligence.
          </p>
        </div>

        <!-- Plan Pricing Table -->
        <div class="bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-200 mb-12">
          <div class="px-8 py-6 border-b border-gray-200">
            <h3 class="text-xl font-semibold text-gray-900">Sample Plan Pricing</h3>
            <p class="text-sm text-gray-600 mt-1">Representative plans with member cost breakdown</p>
          </div>
          
          <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200">
              <thead class="bg-gray-50">
                <tr>
                  <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Plan Name</th>
                  <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Category</th>
                  <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Monthly Premium</th>
                  <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Deductible</th>
                  <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Out-of-Pocket Max</th>
                  <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Network Type</th>
                  <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Popularity</th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200">
                {planPricing.map((plan, index) => (
                  <tr key={index} class="hover:bg-gray-50">
                    <td class="px-6 py-4">
                      <div class="text-sm font-medium text-gray-900">{plan.planName}</div>
                    </td>
                    <td class="px-6 py-4">
                      <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                        {plan.category}
                      </span>
                    </td>
                    <td class="px-6 py-4 text-sm font-semibold text-gray-900">${plan.monthlyPremium}</td>
                    <td class="px-6 py-4 text-sm text-gray-900">${plan.deductible.toLocaleString()}</td>
                    <td class="px-6 py-4 text-sm text-gray-900">${plan.outOfPocketMax.toLocaleString()}</td>
                    <td class="px-6 py-4">
                      <span class={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${
                        plan.networkType === 'PPO' ? 'bg-blue-100 text-blue-800' :
                        plan.networkType === 'HMO' ? 'bg-green-100 text-green-800' :
                        'bg-purple-100 text-purple-800'
                      }`}>
                        {plan.networkType}
                      </span>
                    </td>
                    <td class="px-6 py-4">
                      <div class="flex items-center">
                        <span class="text-sm font-semibold text-gray-900">#{plan.popularityRank}</span>
                        <span class="text-xs text-gray-500 ml-1">in category</span>
                      </div>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </section>

    <!-- Payer Details Section -->
    <section class="py-20 bg-gray-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid lg:grid-cols-3 gap-12">
          
          <!-- Contact Information -->
          <div class="bg-white p-8 rounded-3xl border border-gray-200 shadow-lg">
            <h3 class="text-2xl font-bold text-gray-900 mb-8 flex items-center">
              <svg class="w-6 h-6 mr-3 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
              </svg>
              Contact Information
            </h3>
            
            <div class="space-y-6">
              <div>
                <div class="text-sm font-semibold text-gray-600 mb-2 uppercase tracking-wider">Headquarters</div>
                <div class="text-lg text-gray-900">
                  {payer.address?.street}<br/>
                  {payer.address?.city}, {payer.address?.state} {payer.address?.zip}
                </div>
              </div>
              <div>
                <div class="text-sm font-semibold text-gray-600 mb-2 uppercase tracking-wider">Customer Service</div>
                <div class="text-lg text-gray-900 font-semibold">{payer.phone}</div>
              </div>
              <div>
                <div class="text-sm font-semibold text-gray-600 mb-2 uppercase tracking-wider">Website</div>
                <a href={payer.website} target="_blank" rel="noopener noreferrer" class="text-lg text-blue-600 hover:underline font-semibold">
                  Visit Payer Site
                </a>
              </div>
            </div>
          </div>

          <!-- Identifiers & Company Information -->
          <div class="space-y-8">
            <!-- Identifiers -->
            <div class="bg-white p-8 rounded-3xl border border-gray-200 shadow-lg">
              <h3 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
                <svg class="w-6 h-6 mr-3 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V4a2 2 0 114 0v2m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"/>
                </svg>
                Payer Identifiers
              </h3>
              <div class="space-y-4">
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl border border-gray-200">
                  <span class="font-semibold text-gray-600">EIN</span>
                  <span class="font-mono text-lg font-bold text-gray-900">{payer.ein}</span>
                </div>
                {payer.hiosId && (
                  <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl border border-gray-200">
                    <span class="font-semibold text-gray-600">HIOS ID</span>
                    <span class="font-mono text-lg font-bold text-gray-900">{payer.hiosId}</span>
                  </div>
                )}
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl border border-gray-200">
                  <span class="font-semibold text-gray-600">Market Type</span>
                  <span class="text-lg font-bold text-gray-900">{payer.marketType}</span>
                </div>
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl border border-gray-200">
                  <span class="font-semibold text-gray-600">Network Size</span>
                  <span class="text-lg font-bold text-gray-900">{payer.networkSize}</span>
                </div>
              </div>
            </div>

            <!-- Company Details -->
            <div class="bg-white p-8 rounded-3xl border border-gray-200 shadow-lg">
              <h3 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
                <svg class="w-6 h-6 mr-3 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                </svg>
                Company Information
              </h3>
              <div class="space-y-4">
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl border border-gray-200">
                  <span class="font-semibold text-gray-600">Founded</span>
                  <span class="text-lg font-bold text-gray-900">{payer.foundedYear}</span>
                </div>
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl border border-gray-200">
                  <span class="font-semibold text-gray-600">CEO</span>
                  <span class="text-lg font-bold text-gray-900">{payer.ceoName}</span>
                </div>
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl border border-gray-200">
                  <span class="font-semibold text-gray-600">Employees</span>
                  <span class="text-lg font-bold text-gray-900">{payer.employees?.toLocaleString()}</span>
                </div>
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl border border-gray-200">
                  <span class="font-semibold text-gray-600">Annual Revenue</span>
                  <span class="text-lg font-bold text-gray-900">${payer.annualRevenue}</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Plan Types & Programs -->
          <div class="bg-white p-8 rounded-3xl border border-gray-200 shadow-lg">
            <h3 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
              <svg class="w-6 h-6 mr-3 text-teal-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
              </svg>
              Available Plans & Programs
            </h3>
            
            <!-- Plan Types -->
            <div class="mb-8">
              <h4 class="text-lg font-semibold text-gray-700 mb-4">Plan Types</h4>
              <div class="flex flex-wrap gap-3">
                {payer.planTypes.map(planType => (
                  <span class="inline-flex items-center px-4 py-2 rounded-xl text-base font-semibold bg-teal-100 text-teal-800 border border-teal-200">
                    {planType}
                  </span>
                ))}
              </div>
            </div>

            <!-- Special Programs -->
            <div class="mb-8">
              <h4 class="text-lg font-semibold text-gray-700 mb-4">Special Programs</h4>
              <div class="space-y-3">
                {payer.specialPrograms.map(program => (
                  <div class="flex items-center text-lg text-gray-900 p-3 bg-gray-50 rounded-xl border border-gray-200">
                    <svg class="w-5 h-5 text-green-500 mr-3" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                    </svg>
                    <span class="font-semibold">{program}</span>
                  </div>
                ))}
              </div>
            </div>

            <!-- Coverage States -->
            <div>
              <h4 class="text-lg font-semibold text-gray-700 mb-4">Coverage States</h4>
              <div class="flex flex-wrap gap-2">
                {payer.coverageStates[0] === "All 50 States" ? (
                  <span class="inline-flex items-center px-3 py-2 rounded-lg text-sm font-semibold bg-blue-100 text-blue-800 border border-blue-200">
                    Nationwide Coverage
                  </span>
                ) : (
                  payer.coverageStates.map(state => (
                    <span key={state} class="inline-flex items-center px-3 py-2 rounded-lg text-sm font-semibold bg-blue-100 text-blue-800 border border-blue-200">
                      {state}
                    </span>
                  ))
                )}
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Persistent CTA Block -->
    <section class="py-16 bg-gradient-to-br from-blue-50 to-teal-50">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="bg-white rounded-3xl p-10 shadow-xl border border-blue-200 text-center">
          <h2 class="text-3xl font-bold text-gray-900 mb-6">Ready to Compare Plan Prices?</h2>
          <p class="text-lg text-gray-600 mb-8 max-w-2xl mx-auto">
            Get specific pricing information for plans offered by {payer.name} and compare with other payers in your area.
          </p>
          <a 
            href="/search-procedure"
            class="inline-flex items-center px-10 py-5 border border-transparent text-xl font-semibold rounded-2xl text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 shadow-lg hover:shadow-xl"
          >
            <svg class="w-7 h-7 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
            </svg>
            Search Plan Prices with This Payer
          </a>
        </div>
      </div>
    </section>

    <!-- Legal Disclaimer -->
    <section class="py-8 bg-yellow-50 border-t border-yellow-200">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="bg-yellow-100 border border-yellow-300 rounded-lg p-6">
          <div class="flex items-start">
            <svg class="w-6 h-6 text-yellow-600 mr-3 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
            </svg>
            <div>
              <h3 class="text-lg font-semibold text-yellow-800 mb-2">Important Disclaimer</h3>
              <p class="text-sm text-yellow-700 leading-relaxed mb-4">
                Payer pricing information is based on publicly available transparency data and may not reflect current rates or your specific coverage. 
                Actual costs may vary based on your plan type, deductibles, and individual circumstances. 
                Contact {payer.name} directly for accurate, personalized pricing information. This information is for educational purposes only and should not be considered medical or financial advice.
              </p>
              <div class="flex flex-wrap gap-4 text-sm">
                <a href="/terms-of-use" class="text-yellow-800 hover:text-yellow-900 underline font-medium">Terms of Use</a>
                <a href="/transparency-methodology" class="text-yellow-800 hover:text-yellow-900 underline font-medium">Transparency Methodology</a>
                <a href="/privacy-policy" class="text-yellow-800 hover:text-yellow-900 underline font-medium">Privacy Policy</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Global Footer -->
    <FooterExpanded client:load />
  </div>
</BaseLayout>
