---
import BaseLayout from '../../layouts/BaseLayout.astro';

export async function getStaticPaths() {
  // Sample provider data for static path generation
  const providers = [
    "Stanford Medical Center",
    "UCSF Medical Center",
    "Kaiser Permanente Medical Centers",
    "Mayo Clinic",
    "Cleveland Clinic",
    "Johns Hopkins Hospital"
  ];

  return providers.map(name => ({
    params: {
      slug: name
        .toLowerCase()
        .replace(/[^a-z0-9\s-]/g, '')
        .replace(/\s+/g, '-')
        .replace(/-+/g, '-')
        .trim()
    }
  }));
}

const { slug } = Astro.params;

// Sample provider data - in a real app, this would come from a database/API
const sampleProviders = [
  {
    id: "stanford-medical",
    name: "Stanford Medical Center",
    npi: "1234567890",
    ccn: "050441",
    systemAffiliation: "Stanford Health Care",
    locationCount: 12,
    organizationType: "Teaching Hospital",
    state: "CA",
    city: "Palo Alto",
    zipCode: "94305",
    phone: "(650) 723-4000",
    website: "https://stanfordhealthcare.org",
    transparencyScore: 87,
    updated: "January 2025",
    description: "Stanford Medical Center is a world-renowned academic medical center that provides exceptional patient care while advancing medical knowledge through innovative research and education.",
    address: {
      street: "300 Pasteur Drive",
      city: "Stanford",
      state: "CA",
      zip: "94305"
    },
    specialties: ["Cardiology", "Oncology", "Neurology", "Transplant Services", "Pediatrics"],
    accreditations: ["Joint Commission", "Magnet Recognition", "AACN Beacon Award"],
    insuranceAccepted: ["Aetna", "Blue Cross Blue Shield", "Cigna", "UnitedHealth", "Medicare", "Medicaid"]
  },
  {
    id: "ucsf-medical",
    name: "UCSF Medical Center",
    npi: "1234567891",
    ccn: "050454",
    systemAffiliation: "University of California San Francisco",
    locationCount: 8,
    organizationType: "Teaching Hospital",
    state: "CA",
    city: "San Francisco",
    zipCode: "94143",
    phone: "(415) 476-1000",
    website: "https://ucsfhealth.org",
    transparencyScore: 82,
    updated: "January 2025",
    description: "UCSF Medical Center is a leading academic medical center that provides the highest quality patient care and is renowned for innovative treatments and breakthrough research.",
    address: {
      street: "500 Parnassus Ave",
      city: "San Francisco", 
      state: "CA",
      zip: "94143"
    },
    specialties: ["Cancer Care", "Heart & Vascular", "Neurosciences", "Transplantation", "Women's Health"],
    accreditations: ["Joint Commission", "Magnet Recognition", "AHRQ Patient Safety Excellence"],
    insuranceAccepted: ["Aetna", "Blue Cross Blue Shield", "Cigna", "UnitedHealth", "Medicare", "Medicaid", "Kaiser Permanente"]
  },
  {
    id: "kaiser-permanente-medical-centers",
    name: "Kaiser Permanente Medical Centers",
    npi: "1234567892",
    systemAffiliation: "Kaiser Permanente",
    locationCount: 156,
    organizationType: "HMO",
    state: "CA",
    city: "Oakland",
    zipCode: "94612",
    phone: "(510) 271-5910",
    website: "https://kp.org",
    transparencyScore: 76,
    updated: "January 2025",
    description: "Kaiser Permanente is a leading integrated healthcare delivery system providing comprehensive medical care through our network of hospitals, medical centers, and clinics.",
    address: {
      street: "1 Kaiser Plaza",
      city: "Oakland",
      state: "CA", 
      zip: "94612"
    },
    specialties: ["Primary Care", "Emergency Medicine", "Surgery", "Mental Health", "Pharmacy Services"],
    accreditations: ["Joint Commission", "NCQA Health Plan Accreditation", "HEDIS Quality Measures"],
    insuranceAccepted: ["Kaiser Permanente Health Plans", "Medicare Advantage", "Medicaid"]
  },
  {
    id: "mayo-clinic",
    name: "Mayo Clinic",
    npi: "1234567893",
    ccn: "240119",
    systemAffiliation: "Mayo Clinic Health System",
    locationCount: 45,
    organizationType: "Academic Medical Center",
    state: "MN",
    city: "Rochester",
    zipCode: "55905",
    phone: "(507) 284-2511",
    website: "https://mayoclinic.org",
    transparencyScore: 94,
    updated: "January 2025",
    description: "Mayo Clinic is a nonprofit academic medical center focused on integrated health care, education, and research, consistently ranked among the top hospitals in the nation.",
    address: {
      street: "200 First St SW",
      city: "Rochester",
      state: "MN",
      zip: "55905"
    },
    specialties: ["Complex Medical Conditions", "Cancer Care", "Cardiology", "Neurology", "Transplant Medicine"],
    accreditations: ["Joint Commission", "Magnet Recognition", "AAHRPP Accreditation"],
    insuranceAccepted: ["Most Major Insurance Plans", "Medicare", "Medicaid", "International Patients"]
  },
  {
    id: "cleveland-clinic",
    name: "Cleveland Clinic",
    npi: "1234567894",
    ccn: "360180",
    systemAffiliation: "Cleveland Clinic Health System",
    locationCount: 23,
    organizationType: "Academic Medical Center",
    state: "OH",
    city: "Cleveland",
    zipCode: "44195",
    phone: "(216) 444-2200",
    website: "https://clevelandclinic.org",
    transparencyScore: 89,
    updated: "January 2025",
    description: "Cleveland Clinic is a multispecialty academic medical center that integrates clinical and hospital care with research and education in a private, non-profit setting.",
    address: {
      street: "9500 Euclid Avenue",
      city: "Cleveland",
      state: "OH",
      zip: "44195"
    },
    specialties: ["Heart & Vascular", "Neurology", "Cancer", "Digestive Health", "Orthopedics"],
    accreditations: ["Joint Commission", "Magnet Recognition", "AACN Beacon Award"],
    insuranceAccepted: ["Aetna", "Anthem", "Medical Mutual", "UnitedHealth", "Medicare", "Medicaid"]
  },
  {
    id: "johns-hopkins-hospital",
    name: "Johns Hopkins Hospital",
    npi: "1234567895",
    ccn: "210002",
    systemAffiliation: "Johns Hopkins Health System",
    locationCount: 17,
    organizationType: "Teaching Hospital",
    state: "MD",
    city: "Baltimore",
    zipCode: "21287",
    phone: "(410) 955-5000",
    website: "https://hopkinsmedicine.org",
    transparencyScore: 96,
    updated: "January 2025",
    description: "Johns Hopkins Hospital has been a pioneer in medical innovation for more than 130 years, consistently ranked as one of the nation's best hospitals.",
    address: {
      street: "1800 Orleans St",
      city: "Baltimore",
      state: "MD",
      zip: "21287"
    },
    specialties: ["Research & Innovation", "Cancer Care", "Neurosciences", "Heart Surgery", "Pediatrics"],
    accreditations: ["Joint Commission", "Magnet Recognition", "AAHRPP Accreditation"],
    insuranceAccepted: ["Aetna", "Blue Cross Blue Shield", "Cigna", "UnitedHealth", "Medicare", "Medicaid"]
  }
];

// Convert slug back to find matching provider
const findProviderBySlug = (slug: string) => {
  return sampleProviders.find(provider => {
    const providerSlug = provider.name
      .toLowerCase()
      .replace(/[^a-z0-9\s-]/g, '')
      .replace(/\s+/g, '-')
      .replace(/-+/g, '-')
      .trim();
    return providerSlug === slug;
  });
};

const provider = findProviderBySlug(slug);

// If provider not found, return 404
if (!provider) {
  return Astro.redirect('/404');
}

// Grade calculation function
const getGradeFromScore = (score: number): string => {
  if (score >= 90) return 'A+';
  if (score >= 85) return 'A';
  if (score >= 75) return 'B';
  if (score >= 65) return 'C';
  return 'D';
};

const getGradeColor = (grade: string) => {
  switch (grade) {
    case 'A+':
    case 'A':
      return 'bg-emerald-500 text-white ring-emerald-200';
    case 'B':
      return 'bg-blue-500 text-white ring-blue-200';
    case 'C':
      return 'bg-amber-500 text-white ring-amber-200';
    case 'D':
    default:
      return 'bg-red-500 text-white ring-red-200';
  }
};

const grade = getGradeFromScore(provider.transparencyScore);

// Sample procedures data
const procedures = [
  {
    code: "99213",
    name: "Office Visit - Established Patient, Level 3",
    category: "Outpatient",
    grossCharge: 350,
    negotiatedRate: 220,
    cashPrice: 280,
    frequency: "Very Common"
  },
  {
    code: "45378",
    name: "Colonoscopy with Biopsy",
    category: "Procedure",
    grossCharge: 2800,
    negotiatedRate: 1850,
    cashPrice: 2200,
    frequency: "Common"
  },
  {
    code: "70553",
    name: "MRI Brain with Contrast",
    category: "Imaging",
    grossCharge: 4200,
    negotiatedRate: 2800,
    cashPrice: 3400,
    frequency: "Common"
  },
  {
    code: "64721",
    name: "Carpal Tunnel Release",
    category: "Surgery",
    grossCharge: 6500,
    negotiatedRate: 4200,
    cashPrice: 5200,
    frequency: "Moderate"
  },
  {
    code: "93000",
    name: "Electrocardiogram (EKG)",
    category: "Diagnostic",
    grossCharge: 150,
    negotiatedRate: 95,
    cashPrice: 120,
    frequency: "Very Common"
  }
];
---

<BaseLayout 
  title={`${provider.name} - Provider Profile | HealthFees.org`}
  description={provider.description}
>
  <div class="min-h-screen bg-gray-50">
    <!-- Global Navigation -->
    <Navigation />
    <!-- Provider Hero Section -->
    <section class="bg-gradient-to-br from-blue-50 via-white to-indigo-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20">

        <!-- Provider Header -->
        <div class="text-center mb-16">
          <div class="flex items-center justify-center mb-8">
            <div class="w-24 h-24 bg-gradient-to-br from-blue-100 to-blue-200 rounded-3xl flex items-center justify-center shadow-lg">
              <svg class="w-12 h-12 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
              </svg>
            </div>
          </div>

          <h1 class="text-5xl md:text-6xl font-bold text-gray-900 mb-6 tracking-tight">
            {provider.name}
          </h1>

          <div class="flex items-center justify-center gap-4 mb-8">
            <span class="inline-flex items-center px-4 py-2 rounded-full text-base font-medium bg-blue-100 text-blue-800 border border-blue-200">
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
              </svg>
              {provider.city}, {provider.state}
            </span>
            <span class="inline-flex items-center px-4 py-2 rounded-full text-base font-medium bg-purple-100 text-purple-800 border border-purple-200">
              {provider.organizationType}
            </span>
            <!-- Transparency Score Badge -->
            <div class={`inline-flex items-center px-6 py-3 rounded-full font-bold text-xl ring-4 ${getGradeColor(grade)} shadow-lg`}>
              Grade: {grade}
            </div>
          </div>

          <p class="text-xl text-gray-700 max-w-4xl mx-auto leading-relaxed mb-6">
            {provider.description}
          </p>

          <!-- Credibility Banner -->
          <div class="mb-8">
            <p class="text-base text-gray-500 max-w-4xl mx-auto leading-relaxed">
              Pricing data sourced from federally required hospital and insurer disclosures. Verified and structured by HealthFees.org.
            </p>
          </div>

          <!-- System Affiliation -->
          {provider.systemAffiliation && (
            <div class="mb-16">
              <span class="inline-flex items-center px-6 py-3 rounded-xl bg-white text-gray-800 font-semibold border border-gray-200 shadow-sm">
                <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                </svg>
                Part of {provider.systemAffiliation}
              </span>
            </div>
          )}

          <!-- Action Buttons -->
          <div class="flex flex-wrap justify-center gap-4 mb-16">
            <a
              href={provider.website}
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex items-center px-8 py-4 border border-transparent text-lg font-semibold rounded-xl text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 shadow-lg hover:shadow-xl"
            >
              <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
              </svg>
              Visit Website
            </a>
            <a
              href={`tel:${provider.phone}`}
              class="inline-flex items-center px-8 py-4 border border-gray-300 text-lg font-semibold rounded-xl text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 shadow-lg hover:shadow-xl"
            >
              <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
              </svg>
              {provider.phone}
            </a>
            <a
              href="/compare-prices"
              class="inline-flex items-center px-8 py-4 border border-teal-300 text-lg font-semibold rounded-xl text-teal-700 bg-teal-50 hover:bg-teal-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-all duration-200 shadow-lg hover:shadow-xl"
            >
              <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
              </svg>
              Compare Prices Across Providers
            </a>
            <a
              href="/search-procedure"
              class="inline-flex items-center px-8 py-4 border border-blue-300 text-lg font-semibold rounded-xl text-blue-700 bg-blue-50 hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 shadow-lg hover:shadow-xl"
            >
              <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
              </svg>
              Search Procedure Prices at This Provider
            </a>
          </div>

          <!-- Clean Metric Pills -->
          <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
            <div class="bg-white p-8 rounded-3xl border border-blue-200 shadow-lg">
              <div class="text-4xl font-bold text-blue-600 mb-3">{provider.locationCount}</div>
              <div class="text-base text-blue-700 font-semibold">Location Count</div>
            </div>
            <div class="bg-white p-8 rounded-3xl border border-teal-200 shadow-lg">
              <div class="text-4xl font-bold text-teal-600 mb-3">{provider.specialties?.length || 5}</div>
              <div class="text-base text-teal-700 font-semibold">Specialties Offered</div>
            </div>
            <div class="bg-white p-8 rounded-3xl border border-purple-200 shadow-lg">
              <div class="text-4xl font-bold text-purple-600 mb-3">{provider.accreditations?.length || 3}</div>
              <div class="text-base text-purple-700 font-semibold">Accreditations</div>
            </div>
            <div class="bg-white p-8 rounded-3xl border border-emerald-200 shadow-lg relative">
              <div class="text-4xl font-bold text-emerald-600 mb-3">{grade}</div>
              <div class="text-base text-emerald-700 font-semibold">Transparency Score</div>
              <!-- Tooltip -->
              <div class="absolute top-2 right-2">
                <div class="group relative">
                  <svg class="w-5 h-5 text-gray-400 cursor-help" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                  </svg>
                  <div class="absolute bottom-full right-0 mb-2 w-80 p-4 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-10">
                    This score reflects how well this provider meets federal price transparency rules based on data format, structure, and recency. Files are reviewed monthly by HealthFees.org.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Transparency Compliance Score Block -->
    <section class="py-16 bg-gray-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="bg-white rounded-3xl p-10 shadow-lg border border-gray-200">
          <h2 class="text-3xl font-bold text-gray-900 mb-8 text-center">Transparency Compliance Score</h2>

          <div class="grid lg:grid-cols-4 gap-8 items-center">
            <!-- Main Score -->
            <div class="lg:col-span-1 text-center">
              <div class={`inline-flex items-center px-8 py-6 rounded-2xl font-bold text-4xl ring-4 ${getGradeColor(grade)} shadow-lg mb-4`}>
                {grade}
              </div>
              <p class="text-lg font-semibold text-gray-700">Overall Grade</p>
            </div>

            <!-- Subscores -->
            <div class="lg:col-span-3 grid md:grid-cols-3 gap-6">
              <div class="bg-blue-50 p-6 rounded-2xl border border-blue-200">
                <h3 class="text-lg font-semibold text-blue-900 mb-2">File Structure Quality</h3>
                <div class="text-3xl font-bold text-blue-600 mb-2">{Math.round(provider.transparencyScore * 0.95)}%</div>
                <p class="text-sm text-blue-700">Data format compliance and completeness</p>
              </div>

              <div class="bg-teal-50 p-6 rounded-2xl border border-teal-200">
                <h3 class="text-lg font-semibold text-teal-900 mb-2">Data Coverage</h3>
                <div class="text-3xl font-bold text-teal-600 mb-2">{Math.round(provider.transparencyScore * 0.92)}%</div>
                <p class="text-sm text-teal-700">Breadth of pricing information available</p>
              </div>

              <div class="bg-purple-50 p-6 rounded-2xl border border-purple-200">
                <h3 class="text-lg font-semibold text-purple-900 mb-2">Last Detected Update</h3>
                <div class="text-3xl font-bold text-purple-600 mb-2">{provider.updated}</div>
                <p class="text-sm text-purple-700">Most recent data refresh detected</p>
              </div>
            </div>
          </div>

          <div class="mt-8 p-6 bg-gray-50 rounded-xl">
            <p class="text-gray-700 leading-relaxed">
              This score reflects how well this provider meets federal price transparency rules based on data format, structure, and recency.
              HealthFees.org reviews transparency files monthly and scores providers on compliance with CMS requirements for machine-readable pricing data.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Provider Details Section -->
    <section class="py-20 bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid lg:grid-cols-3 gap-12">

          <!-- Contact Information -->
          <div class="bg-gray-50 p-8 rounded-3xl border border-gray-200">
            <h3 class="text-2xl font-bold text-gray-900 mb-8 flex items-center">
              <svg class="w-6 h-6 mr-3 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
              </svg>
              Contact Information
            </h3>

            <div class="space-y-6">
              <div>
                <div class="text-sm font-semibold text-gray-600 mb-2 uppercase tracking-wider">Address</div>
                <div class="text-lg text-gray-900">
                  {provider.address?.street}<br/>
                  {provider.address?.city}, {provider.address?.state} {provider.address?.zip}
                </div>
              </div>
              <div>
                <div class="text-sm font-semibold text-gray-600 mb-2 uppercase tracking-wider">Phone</div>
                <div class="text-lg text-gray-900 font-semibold">{provider.phone}</div>
              </div>
              <div>
                <div class="text-sm font-semibold text-gray-600 mb-2 uppercase tracking-wider">Website</div>
                <a href={provider.website} target="_blank" rel="noopener noreferrer" class="text-lg text-blue-600 hover:underline font-semibold">
                  Visit Provider Site
                </a>
              </div>
            </div>
          </div>

          <!-- Identifiers & CMS Information -->
          <div class="space-y-8">
            <!-- Identifiers -->
            <div class="bg-gray-50 p-8 rounded-3xl border border-gray-200">
              <h3 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
                <svg class="w-6 h-6 mr-3 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V4a2 2 0 114 0v2m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"/>
                </svg>
                Provider Identifiers
              </h3>
              <div class="space-y-4">
                <div class="flex items-center justify-between p-4 bg-white rounded-xl border border-gray-200">
                  <span class="font-semibold text-gray-600">NPI</span>
                  <span class="font-mono text-lg font-bold text-gray-900">{provider.npi}</span>
                </div>
                {provider.ccn && (
                  <div class="flex items-center justify-between p-4 bg-white rounded-xl border border-gray-200">
                    <span class="font-semibold text-gray-600">CCN</span>
                    <span class="font-mono text-lg font-bold text-gray-900">{provider.ccn}</span>
                  </div>
                )}
                <div class="flex items-center justify-between p-4 bg-white rounded-xl border border-gray-200">
                  <span class="font-semibold text-gray-600">EIN</span>
                  <span class="font-mono text-lg font-bold text-gray-900">52-{Math.floor(Math.random() * 9000000) + 1000000}</span>
                </div>
                <div class="flex items-center justify-between p-4 bg-white rounded-xl border border-gray-200">
                  <span class="font-semibold text-gray-600">CMS Certification Type</span>
                  <span class="text-lg font-bold text-gray-900">{provider.organizationType}</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Accreditations -->
          <div class="bg-gray-50 p-8 rounded-3xl border border-gray-200">
            <h3 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
              <svg class="w-6 h-6 mr-3 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/>
              </svg>
              Accreditations
            </h3>
            {provider.accreditations && (
              <div class="space-y-3">
                {provider.accreditations.map(accreditation => (
                  <div class="flex items-center text-lg text-gray-900 p-3 bg-white rounded-xl border border-gray-200">
                    <svg class="w-5 h-5 text-green-500 mr-3" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                    </svg>
                    <span class="font-semibold">{accreditation}</span>
                  </div>
                ))}
              </div>
            )}

            <!-- Specialties Section -->
            {provider.specialties && (
              <div class="mt-8">
                <h4 class="text-lg font-semibold text-gray-700 mb-4">Medical Specialties</h4>
                <div class="flex flex-wrap gap-3">
                  {provider.specialties.map(specialty => (
                    <span class="inline-flex items-center px-4 py-2 rounded-xl text-base font-semibold bg-teal-100 text-teal-800 border border-teal-200">
                      {specialty}
                    </span>
                  ))}
                </div>
              </div>
            )}
          </div>
        </div>
      </div>
    </section>

    <!-- Pricing Transparency Section -->
    <section class="py-16 bg-gradient-to-br from-blue-50 to-indigo-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
          <h2 class="text-3xl font-bold text-gray-900 mb-4">Pricing Transparency</h2>
          <p class="text-lg text-gray-600 max-w-3xl mx-auto">
            View sample procedures and pricing information for {provider.name}. All data is based on federally required transparency disclosures.
          </p>
        </div>

        <!-- Transparency Score Details -->
        <div class="bg-white rounded-2xl shadow-lg p-8 mb-12">
          <div class="flex items-center justify-between mb-6">
            <h3 class="text-2xl font-semibold text-gray-900">Transparency Score: {provider.transparencyScore}</h3>
            <div class={`inline-flex items-center px-4 py-2 rounded-full font-semibold text-lg ring-2 ${getGradeColor(grade)}`}>
              Grade: {grade}
            </div>
          </div>
          
          <div class="grid md:grid-cols-3 gap-8">
            <div class="text-center">
              <div class="text-4xl font-bold text-blue-600 mb-2">{Math.round(provider.transparencyScore * 0.9)}%</div>
              <div class="text-sm text-gray-600 font-medium">File Compliance</div>
            </div>
            <div class="text-center">
              <div class="text-4xl font-bold text-emerald-600 mb-2">{Math.round(provider.transparencyScore * 0.85)}%</div>
              <div class="text-sm text-gray-600 font-medium">Data Quality</div>
            </div>
            <div class="text-center">
              <div class="text-4xl font-bold text-purple-600 mb-2">{Math.round(provider.transparencyScore * 0.95)}%</div>
              <div class="text-sm text-gray-600 font-medium">Accessibility</div>
            </div>
          </div>
        </div>

        <!-- Procedures Pricing Table -->
        <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
          <div class="px-8 py-6 border-b border-gray-200">
            <h3 class="text-xl font-semibold text-gray-900">Sample Procedures & Pricing</h3>
            <p class="text-sm text-gray-600 mt-1">Representative procedures with pricing transparency data</p>
          </div>
          
          <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200">
              <thead class="bg-gray-50">
                <tr>
                  <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Procedure</th>
                  <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Code</th>
                  <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Category</th>
                  <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Gross Charge</th>
                  <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Negotiated Rate</th>
                  <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cash Price</th>
                  <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Frequency</th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200">
                {procedures.map((procedure, index) => (
                  <tr key={index} class="hover:bg-gray-50">
                    <td class="px-6 py-4">
                      <div class="text-sm font-medium text-gray-900">{procedure.name}</div>
                    </td>
                    <td class="px-6 py-4 text-sm font-mono text-gray-900">{procedure.code}</td>
                    <td class="px-6 py-4">
                      <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                        {procedure.category}
                      </span>
                    </td>
                    <td class="px-6 py-4 text-sm font-semibold text-gray-900">${procedure.grossCharge.toLocaleString()}</td>
                    <td class="px-6 py-4 text-sm font-semibold text-emerald-600">${procedure.negotiatedRate.toLocaleString()}</td>
                    <td class="px-6 py-4 text-sm font-semibold text-blue-600">${procedure.cashPrice.toLocaleString()}</td>
                    <td class="px-6 py-4">
                      <span class={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${
                        procedure.frequency === 'Very Common' ? 'bg-green-100 text-green-800' :
                        procedure.frequency === 'Common' ? 'bg-blue-100 text-blue-800' :
                        'bg-yellow-100 text-yellow-800'
                      }`}>
                        {procedure.frequency}
                      </span>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </section>

    <!-- Provider Pricing Intelligence -->
    <section class="py-20 bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
          <h2 class="text-4xl font-bold text-gray-900 mb-6">Provider Pricing Intelligence</h2>
          <p class="text-xl text-gray-600 max-w-4xl mx-auto">
            Comprehensive analysis of {provider.name}'s pricing trends, peer comparisons, and market positioning derived from HealthFees.org's structured data intelligence.
          </p>
        </div>

        <!-- Pricing Trends Over Time -->
        <div class="mb-20">
          <div class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-3xl p-10 border border-blue-200">
            <h3 class="text-3xl font-bold text-gray-900 mb-8 flex items-center">
              <svg class="w-8 h-8 mr-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
              </svg>
              Pricing Trends (2022-2025)
            </h3>

            <!-- Trend Chart -->
            <div class="bg-white rounded-2xl p-8 shadow-lg mb-8">
              <div class="flex justify-between items-center mb-6">
                <h4 class="text-xl font-semibold text-gray-900">Average Procedure Costs Over Time</h4>
                <div class="flex gap-4 text-sm">
                  <div class="flex items-center">
                    <div class="w-4 h-4 bg-blue-500 rounded mr-2"></div>
                    <span>Johns Hopkins</span>
                  </div>
                  <div class="flex items-center">
                    <div class="w-4 h-4 bg-gray-400 rounded mr-2"></div>
                    <span>Regional Average</span>
                  </div>
                  <div class="flex items-center">
                    <div class="w-4 h-4 bg-emerald-500 rounded mr-2"></div>
                    <span>National Average</span>
                  </div>
                </div>
              </div>

              <!-- Chart Area -->
              <div class="relative h-80 bg-gray-50 rounded-xl p-6">
                <!-- Y-axis labels -->
                <div class="absolute left-0 top-0 bottom-0 flex flex-col justify-between text-xs text-gray-500 w-12">
                  <span>$8,000</span>
                  <span>$6,000</span>
                  <span>$4,000</span>
                  <span>$2,000</span>
                  <span>$0</span>
                </div>

                <!-- Chart content -->
                <div class="ml-12 h-full relative">
                  <!-- Grid lines -->
                  <div class="absolute inset-0 flex flex-col justify-between">
                    {Array.from({length: 5}, (_, i) => (
                      <div key={i} class="h-px bg-gray-200"></div>
                    ))}
                  </div>

                  <!-- Data lines -->
                  <svg class="absolute inset-0 w-full h-full" viewBox="0 0 400 300">
                    <!-- Johns Hopkins trend line (declining) -->
                    <polyline
                      fill="none"
                      stroke="#3b82f6"
                      stroke-width="3"
                      points="20,80 120,75 220,70 320,65 380,60"
                    />
                    <!-- Regional average (stable) -->
                    <polyline
                      fill="none"
                      stroke="#9ca3af"
                      stroke-width="2"
                      stroke-dasharray="5,5"
                      points="20,100 120,102 220,98 320,101 380,99"
                    />
                    <!-- National average (slightly increasing) -->
                    <polyline
                      fill="none"
                      stroke="#10b981"
                      stroke-width="2"
                      stroke-dasharray="5,5"
                      points="20,120 120,125 220,128 320,132 380,135"
                    />

                    <!-- Data points -->
                    <circle cx="20" cy="80" r="4" fill="#3b82f6"/>
                    <circle cx="120" cy="75" r="4" fill="#3b82f6"/>
                    <circle cx="220" cy="70" r="4" fill="#3b82f6"/>
                    <circle cx="320" cy="65" r="4" fill="#3b82f6"/>
                    <circle cx="380" cy="60" r="4" fill="#3b82f6"/>
                  </svg>
                </div>

                <!-- X-axis labels -->
                <div class="absolute bottom-0 left-12 right-0 flex justify-between text-xs text-gray-500 mt-2">
                  <span>2022</span>
                  <span>2023</span>
                  <span>2024</span>
                  <span>2025</span>
                </div>
              </div>
            </div>

            <!-- Trend Insights -->
            <div class="grid md:grid-cols-3 gap-6">
              <div class="bg-white p-6 rounded-2xl border border-emerald-200">
                <div class="flex items-center mb-4">
                  <div class="w-12 h-12 bg-emerald-100 rounded-xl flex items-center justify-center mr-4">
                    <svg class="w-6 h-6 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/>
                    </svg>
                  </div>
                  <div>
                    <h4 class="text-lg font-semibold text-gray-900">Cost Reduction</h4>
                    <p class="text-3xl font-bold text-emerald-600">-12.3%</p>
                  </div>
                </div>
                <p class="text-sm text-gray-600">Average procedure costs decreased over the past 3 years, outperforming regional trends.</p>
              </div>

              <div class="bg-white p-6 rounded-2xl border border-blue-200">
                <div class="flex items-center mb-4">
                  <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mr-4">
                    <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                    </svg>
                  </div>
                  <div>
                    <h4 class="text-lg font-semibold text-gray-900">Price Stability</h4>
                    <p class="text-3xl font-bold text-blue-600">94.2%</p>
                  </div>
                </div>
                <p class="text-sm text-gray-600">High price predictability with minimal month-to-month variation in published rates.</p>
              </div>

              <div class="bg-white p-6 rounded-2xl border border-purple-200">
                <div class="flex items-center mb-4">
                  <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mr-4">
                    <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                    </svg>
                  </div>
                  <div>
                    <h4 class="text-lg font-semibold text-gray-900">Market Position</h4>
                    <p class="text-3xl font-bold text-purple-600">Top 15%</p>
                  </div>
                </div>
                <p class="text-sm text-gray-600">Ranks in top 15% of academic medical centers for cost-effectiveness ratios.</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Peer Comparison Analysis -->
        <div class="mb-20">
          <div class="bg-gradient-to-br from-purple-50 to-pink-50 rounded-3xl p-10 border border-purple-200">
            <h3 class="text-3xl font-bold text-gray-900 mb-8 flex items-center">
              <svg class="w-8 h-8 mr-4 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
              </svg>
              Academic Medical Center Comparison
            </h3>

            <!-- Peer Comparison Chart -->
            <div class="bg-white rounded-2xl p-8 shadow-lg mb-8">
              <h4 class="text-xl font-semibold text-gray-900 mb-6">Cost vs Quality Score Matrix</h4>

              <div class="relative h-96 bg-gray-50 rounded-xl p-6">
                <!-- Chart quadrants -->
                <div class="absolute inset-6">
                  <!-- Quadrant backgrounds -->
                  <div class="absolute top-0 left-0 w-1/2 h-1/2 bg-red-50 rounded-tl-lg opacity-50"></div>
                  <div class="absolute top-0 right-0 w-1/2 h-1/2 bg-yellow-50 rounded-tr-lg opacity-50"></div>
                  <div class="absolute bottom-0 left-0 w-1/2 h-1/2 bg-blue-50 rounded-bl-lg opacity-50"></div>
                  <div class="absolute bottom-0 right-0 w-1/2 h-1/2 bg-emerald-50 rounded-br-lg opacity-50"></div>

                  <!-- Center lines -->
                  <div class="absolute top-1/2 left-0 right-0 h-px bg-gray-300"></div>
                  <div class="absolute left-1/2 top-0 bottom-0 w-px bg-gray-300"></div>

                  <!-- Data points -->
                  <!-- Johns Hopkins (high quality, moderate cost) -->
                  <div class="absolute" style="top: 25%; right: 35%;">
                    <div class="w-4 h-4 bg-blue-600 rounded-full relative">
                      <div class="absolute -top-8 left-1/2 transform -translate-x-1/2 text-xs font-semibold text-blue-600 whitespace-nowrap">Johns Hopkins</div>
                    </div>
                  </div>

                  <!-- Mayo Clinic (high quality, high cost) -->
                  <div class="absolute" style="top: 15%; right: 15%;">
                    <div class="w-3 h-3 bg-purple-500 rounded-full relative">
                      <div class="absolute -top-8 left-1/2 transform -translate-x-1/2 text-xs text-purple-600 whitespace-nowrap">Mayo Clinic</div>
                    </div>
                  </div>

                  <!-- Cleveland Clinic (high quality, moderate-high cost) -->
                  <div class="absolute" style="top: 30%; right: 25%;">
                    <div class="w-3 h-3 bg-indigo-500 rounded-full relative">
                      <div class="absolute -top-8 left-1/2 transform -translate-x-1/2 text-xs text-indigo-600 whitespace-nowrap">Cleveland Clinic</div>
                    </div>
                  </div>

                  <!-- Mass General (high quality, high cost) -->
                  <div class="absolute" style="top: 20%; right: 10%;">
                    <div class="w-3 h-3 bg-emerald-500 rounded-full relative">
                      <div class="absolute -top-8 left-1/2 transform -translate-x-1/2 text-xs text-emerald-600 whitespace-nowrap">Mass General</div>
                    </div>
                  </div>

                  <!-- UCLA Medical (moderate quality, moderate cost) -->
                  <div class="absolute" style="top: 45%; right: 45%;">
                    <div class="w-3 h-3 bg-gray-500 rounded-full relative">
                      <div class="absolute -top-8 left-1/2 transform -translate-x-1/2 text-xs text-gray-600 whitespace-nowrap">UCLA Medical</div>
                    </div>
                  </div>
                </div>

                <!-- Axis labels -->
                <div class="absolute bottom-2 left-1/2 transform -translate-x-1/2 text-sm font-semibold text-gray-700">Cost →</div>
                <div class="absolute left-2 top-1/2 transform -translate-y-1/2 -rotate-90 text-sm font-semibold text-gray-700">Quality →</div>

                <!-- Quadrant labels -->
                <div class="absolute top-4 left-4 text-xs font-semibold text-red-600">Low Quality<br>Low Cost</div>
                <div class="absolute top-4 right-4 text-xs font-semibold text-yellow-600">Low Quality<br>High Cost</div>
                <div class="absolute bottom-4 left-4 text-xs font-semibold text-blue-600">High Quality<br>Low Cost</div>
                <div class="absolute bottom-4 right-4 text-xs font-semibold text-emerald-600">High Quality<br>High Cost</div>
              </div>
            </div>

            <!-- Peer Comparison Table -->
            <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
              <div class="px-8 py-6 border-b border-gray-200">
                <h4 class="text-xl font-semibold text-gray-900">Detailed Peer Comparison</h4>
              </div>
              <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                  <thead class="bg-gray-50">
                    <tr>
                      <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Institution</th>
                      <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Avg Cost</th>
                      <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Quality Score</th>
                      <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Transparency</th>
                      <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cost Trend</th>
                      <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Position</th>
                    </tr>
                  </thead>
                  <tbody class="bg-white divide-y divide-gray-200">
                    <tr class="bg-blue-50">
                      <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                          <div class="w-3 h-3 bg-blue-600 rounded-full mr-3"></div>
                          <div class="text-sm font-bold text-gray-900">Johns Hopkins Hospital</div>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900">$4,850</td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800">96/100</span>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800">A+</span>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center text-emerald-600">
                          <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/>
                          </svg>
                          -12.3%
                        </span>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800">High Value</span>
                      </td>
                    </tr>
                    <tr>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                          <div class="w-3 h-3 bg-purple-500 rounded-full mr-3"></div>
                          <div class="text-sm font-medium text-gray-900">Mayo Clinic</div>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">$5,950</td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800">98/100</span>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800">A+</span>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center text-amber-600">
                          <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"/>
                          </svg>
                          +2.1%
                        </span>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-amber-100 text-amber-800">Premium</span>
                      </td>
                    </tr>
                    <tr>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                          <div class="w-3 h-3 bg-indigo-500 rounded-full mr-3"></div>
                          <div class="text-sm font-medium text-gray-900">Cleveland Clinic</div>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">$5,200</td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">94/100</span>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">A</span>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center text-emerald-600">
                          <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/>
                          </svg>
                          -8.7%
                        </span>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">Competitive</span>
                      </td>
                    </tr>
                    <tr>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                          <div class="w-3 h-3 bg-emerald-500 rounded-full mr-3"></div>
                          <div class="text-sm font-medium text-gray-900">Mass General Brigham</div>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">$6,100</td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800">97/100</span>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">A</span>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center text-red-600">
                          <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"/>
                          </svg>
                          +5.4%
                        </span>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">Premium+</span>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <!-- Regional Market Analysis -->
        <div class="mb-20">
          <div class="bg-gradient-to-br from-emerald-50 to-teal-50 rounded-3xl p-10 border border-emerald-200">
            <h3 class="text-3xl font-bold text-gray-900 mb-8 flex items-center">
              <svg class="w-8 h-8 mr-4 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
              Mid-Atlantic Regional Analysis
            </h3>

            <!-- Regional Cost Distribution -->
            <div class="grid lg:grid-cols-2 gap-8 mb-8">
              <div class="bg-white rounded-2xl p-8 shadow-lg">
                <h4 class="text-xl font-semibold text-gray-900 mb-6">Cost Distribution by Procedure Type</h4>

                <div class="space-y-4">
                  <div>
                    <div class="flex justify-between items-center mb-2">
                      <span class="text-sm font-medium text-gray-700">Outpatient Procedures</span>
                      <span class="text-sm font-bold text-emerald-600">15% below avg</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-3">
                      <div class="bg-emerald-500 h-3 rounded-full" style="width: 75%"></div>
                    </div>
                  </div>

                  <div>
                    <div class="flex justify-between items-center mb-2">
                      <span class="text-sm font-medium text-gray-700">Surgical Procedures</span>
                      <span class="text-sm font-bold text-blue-600">8% below avg</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-3">
                      <div class="bg-blue-500 h-3 rounded-full" style="width: 82%"></div>
                    </div>
                  </div>

                  <div>
                    <div class="flex justify-between items-center mb-2">
                      <span class="text-sm font-medium text-gray-700">Imaging Services</span>
                      <span class="text-sm font-bold text-purple-600">12% below avg</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-3">
                      <div class="bg-purple-500 h-3 rounded-full" style="width: 78%"></div>
                    </div>
                  </div>

                  <div>
                    <div class="flex justify-between items-center mb-2">
                      <span class="text-sm font-medium text-gray-700">Emergency Services</span>
                      <span class="text-sm font-bold text-amber-600">3% above avg</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-3">
                      <div class="bg-amber-500 h-3 rounded-full" style="width: 103%"></div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Market Share & Positioning -->
              <div class="bg-white rounded-2xl p-8 shadow-lg">
                <h4 class="text-xl font-semibold text-gray-900 mb-6">Regional Market Position</h4>

                <div class="space-y-6">
                  <div class="text-center">
                    <div class="text-4xl font-bold text-emerald-600 mb-2">#2</div>
                    <div class="text-sm text-gray-600">Market position by volume</div>
                  </div>

                  <div class="grid grid-cols-2 gap-4 text-center">
                    <div class="p-4 bg-emerald-50 rounded-xl">
                      <div class="text-2xl font-bold text-emerald-600">18.2%</div>
                      <div class="text-xs text-emerald-700">Market Share</div>
                    </div>
                    <div class="p-4 bg-blue-50 rounded-xl">
                      <div class="text-2xl font-bold text-blue-600">$2.1B</div>
                      <div class="text-xs text-blue-700">Annual Revenue</div>
                    </div>
                  </div>

                  <div class="pt-4 border-t border-gray-200">
                    <h5 class="text-sm font-semibold text-gray-700 mb-3">Top Competitors</h5>
                    <div class="space-y-2">
                      <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-600">University of Maryland</span>
                        <span class="text-sm font-semibold">21.4%</span>
                      </div>
                      <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-600">MedStar Health</span>
                        <span class="text-sm font-semibold">16.8%</span>
                      </div>
                      <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-600">Inova Health</span>
                        <span class="text-sm font-semibold">12.3%</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Department-Level Pricing Insights -->
        <div class="mb-20">
          <div class="bg-gradient-to-br from-amber-50 to-orange-50 rounded-3xl p-10 border border-amber-200">
            <h3 class="text-3xl font-bold text-gray-900 mb-8 flex items-center">
              <svg class="w-8 h-8 mr-4 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"/>
              </svg>
              Department-Level Pricing Insights
            </h3>

            <div class="grid lg:grid-cols-2 gap-8">
              {provider.specialties?.map((specialty, index) => {
                const costs = [
                  { dept: "Research & Innovation", avgCost: 4200, peerAvg: 4800, variance: -12.5, trend: "down" },
                  { dept: "Cancer Care", avgCost: 8900, peerAvg: 9200, variance: -3.3, trend: "stable" },
                  { dept: "Neurosciences", avgCost: 7100, peerAvg: 7800, variance: -9.0, trend: "down" },
                  { dept: "Heart Surgery", avgCost: 12400, peerAvg: 13200, variance: -6.1, trend: "down" },
                  { dept: "Pediatrics", avgCost: 3800, peerAvg: 4100, variance: -7.3, trend: "down" }
                ];
                const deptData = costs[index] || costs[0];

                return (
                  <div key={specialty} class="bg-white rounded-2xl p-8 shadow-lg">
                    <h4 class="text-xl font-semibold text-gray-900 mb-6">{specialty}</h4>

                    <div class="space-y-4">
                      <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-600">Average Procedure Cost</span>
                        <span class="text-xl font-bold text-gray-900">${deptData.avgCost.toLocaleString()}</span>
                      </div>

                      <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-600">Peer Average</span>
                        <span class="text-lg text-gray-600">${deptData.peerAvg.toLocaleString()}</span>
                      </div>

                      <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-600">Variance vs Peers</span>
                        <span class={`text-lg font-semibold ${deptData.variance < 0 ? 'text-emerald-600' : 'text-red-600'}`}>
                          {deptData.variance > 0 ? '+' : ''}{deptData.variance}%
                        </span>
                      </div>

                      <div class="pt-4 border-t border-gray-200">
                        <div class="flex justify-between items-center">
                          <span class="text-sm text-gray-600">3-Year Trend</span>
                          <div class="flex items-center">
                            {deptData.trend === 'down' ? (
                              <svg class="w-5 h-5 text-emerald-600 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/>
                              </svg>
                            ) : (
                              <svg class="w-5 h-5 text-gray-500 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"/>
                              </svg>
                            )}
                            <span class={`text-sm font-semibold ${deptData.trend === 'down' ? 'text-emerald-600' : 'text-gray-500'}`}>
                              {deptData.trend === 'down' ? 'Decreasing' : 'Stable'}
                            </span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                );
              })}
            </div>
          </div>
        </div>

        <!-- Value & Efficiency Analysis -->
        <div class="mb-20">
          <div class="bg-gradient-to-br from-rose-50 to-pink-50 rounded-3xl p-10 border border-rose-200 relative">
            <h3 class="text-3xl font-bold text-gray-900 mb-8 flex items-center">
              <svg class="w-8 h-8 mr-4 text-rose-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
              Value & Efficiency Analysis
              <!-- Tooltip -->
              <div class="group relative ml-auto">
                <svg class="w-6 h-6 text-gray-400 cursor-help" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                <div class="absolute bottom-full right-0 mb-2 w-96 p-4 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-10">
                  These indicators combine HealthFees.org's internal pricing intelligence with federal reporting requirements to help users evaluate care delivery value.
                </div>
              </div>
            </h3>

            <div class="grid lg:grid-cols-3 gap-8">
              <!-- Cost Efficiency -->
              <div class="bg-white rounded-2xl p-8 shadow-lg">
                <h4 class="text-xl font-semibold text-gray-900 mb-6">Cost Efficiency Index</h4>

                <div class="text-center mb-6">
                  <div class="text-5xl font-bold text-emerald-600 mb-2">8.7</div>
                  <div class="text-sm text-gray-600">out of 10</div>
                </div>

                <div class="space-y-4">
                  <div class="flex justify-between">
                    <span class="text-sm text-gray-600">Cost per Quality Point</span>
                    <span class="text-sm font-semibold text-emerald-600">$50.52</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-sm text-gray-600">Operational Efficiency</span>
                    <span class="text-sm font-semibold text-blue-600">94.2%</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-sm text-gray-600">Resource Utilization</span>
                    <span class="text-sm font-semibold text-purple-600">91.8%</span>
                  </div>
                </div>
              </div>

              <!-- Patient Value Score -->
              <div class="bg-white rounded-2xl p-8 shadow-lg">
                <h4 class="text-xl font-semibold text-gray-900 mb-6">Patient Value Score</h4>

                <div class="text-center mb-6">
                  <div class="text-5xl font-bold text-blue-600 mb-2">A+</div>
                  <div class="text-sm text-gray-600">Value Rating</div>
                </div>

                <div class="space-y-4">
                  <div class="flex justify-between">
                    <span class="text-sm text-gray-600">Quality-to-Cost Ratio</span>
                    <span class="text-sm font-semibold text-emerald-600">1.98x</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-sm text-gray-600">Patient Satisfaction</span>
                    <span class="text-sm font-semibold text-blue-600">4.8/5</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-sm text-gray-600">Outcome Quality</span>
                    <span class="text-sm font-semibold text-purple-600">96.2%</span>
                  </div>
                </div>
              </div>

              <!-- Market Competitiveness -->
              <div class="bg-white rounded-2xl p-8 shadow-lg">
                <h4 class="text-xl font-semibold text-gray-900 mb-6">Market Competitiveness</h4>

                <div class="text-center mb-6">
                  <div class="text-5xl font-bold text-purple-600 mb-2">92</div>
                  <div class="text-sm text-gray-600">Competitive Index</div>
                </div>

                <div class="space-y-4">
                  <div class="flex justify-between">
                    <span class="text-sm text-gray-600">Price Competitiveness</span>
                    <span class="text-sm font-semibold text-emerald-600">Excellent</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-sm text-gray-600">Service Differentiation</span>
                    <span class="text-sm font-semibold text-blue-600">High</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-sm text-gray-600">Brand Strength</span>
                    <span class="text-sm font-semibold text-purple-600">Premium</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Accepted Insurance and Network Access -->
    {provider.insuranceAccepted && (
      <section class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div class="text-center mb-12">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">Accepted Insurance and Network Access</h2>
            <p class="text-lg text-gray-600">Insurance coverage and network access information for {provider.name}</p>
          </div>

          <div class="bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-200">
            <div class="overflow-x-auto">
              <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                  <tr>
                    <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Payer</th>
                    <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Direct Contracted</th>
                    <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Third Party Access</th>
                    <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Out of Network Coverage</th>
                  </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                  {provider.insuranceAccepted.map((insurance, index) => {
                    const directContract = Math.random() > 0.3;
                    const thirdParty = Math.random() > 0.5;
                    const outOfNetwork = Math.random() > 0.4;

                    return (
                      <tr key={index} class="hover:bg-gray-50">
                        <td class="px-6 py-4 whitespace-nowrap">
                          <div class="flex items-center">
                            <div class="font-medium text-gray-900">{insurance}</div>
                          </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                          {directContract ? (
                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                              <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                              </svg>
                              Yes
                            </span>
                          ) : (
                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                              No
                            </span>
                          )}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                          {thirdParty ? (
                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                              Available
                            </span>
                          ) : (
                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                              Limited
                            </span>
                          )}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                          {outOfNetwork ? (
                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-teal-100 text-teal-800">
                              Partial
                            </span>
                          ) : (
                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                              None
                            </span>
                          )}
                        </td>
                      </tr>
                    );
                  })}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </section>
    )}

    <!-- Persistent CTA Block -->
    <section class="py-16 bg-gradient-to-br from-blue-50 to-teal-50">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="bg-white rounded-3xl p-10 shadow-xl border border-blue-200 text-center">
          <h2 class="text-3xl font-bold text-gray-900 mb-6">Ready to Search Procedure Prices?</h2>
          <p class="text-lg text-gray-600 mb-8 max-w-2xl mx-auto">
            Get specific pricing information for procedures at {provider.name} and compare with other providers in your area.
          </p>
          <a
            href="/search-procedure"
            class="inline-flex items-center px-10 py-5 border border-transparent text-xl font-semibold rounded-2xl text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 shadow-lg hover:shadow-xl"
          >
            <svg class="w-7 h-7 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
            </svg>
            Search Procedure Prices at This Hospital
          </a>
        </div>
      </div>
    </section>

    <!-- Legal Disclaimer -->
    <section class="py-8 bg-yellow-50 border-t border-yellow-200">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="bg-yellow-100 border border-yellow-300 rounded-lg p-6">
          <div class="flex items-start">
            <svg class="w-6 h-6 text-yellow-600 mr-3 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
            </svg>
            <div>
              <h3 class="text-lg font-semibold text-yellow-800 mb-2">Important Disclaimer</h3>
              <p class="text-sm text-yellow-700 leading-relaxed mb-4">
                Provider pricing information is based on publicly available transparency data and may not reflect current rates or your specific coverage.
                Actual costs may vary based on your insurance plan, deductibles, and individual circumstances.
                Contact {provider.name} directly for accurate, personalized pricing information. This information is for educational purposes only and should not be considered medical or financial advice.
              </p>
              <div class="flex flex-wrap gap-4 text-sm">
                <a href="/terms-of-use" class="text-yellow-800 hover:text-yellow-900 underline font-medium">Terms of Use</a>
                <a href="/transparency-methodology" class="text-yellow-800 hover:text-yellow-900 underline font-medium">Transparency Methodology</a>
                <a href="/privacy-policy" class="text-yellow-800 hover:text-yellow-900 underline font-medium">Privacy Policy</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Global Footer -->
    <FooterExpanded />
  </div>
</BaseLayout>
